#!/usr/bin/env node

'use strict';
const path = require('path');
const { exec } = require('child_process');

const params = process.argv.slice(2);
const root = path.join(process.env.PWD, params[0] || 'mock');
const port = params[1] || 3000;
const server = `${__dirname}/server.js`;

const child = exec(`nodemon --watch ${root} ${server} ${root} ${port}`);

child.stdout.on('data', data => console.log(String(data)));
child.stderr.on('data', data => console.error(String(data)));
child.on('close', code => process.exit(code));
